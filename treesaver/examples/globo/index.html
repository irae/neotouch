<!doctype html>
<html class="no-js no-treesaver">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1,minimum-scale=1,maximum-scale=1">
    <title>Treesaver - Content Fields</title>
    <link rel="resources" href="resources.html">
    <link rel="index" href="toc.json" type="application/json">
    <link rel="stylesheet" href="../treesaver.css">
    <link rel="stylesheet" href="news.css">
    <script src="../../lib/mustache/mustache.js"></script>
    <script src="../../lib/closure/goog/base.js"></script>
    <script src="../../test/deps.js"></script>
    <script>
      goog.require('treesaver');
    </script>
  </head>

  <body>
    <article>
      <h1>Table Of Contents</h1>
      <ul id="toc">
        <li><a href="world.html">World News</a></li>
        <li><a href="local.html">Local News</a></li>
        <li><a href="sport.html">Sports</a></li>
      </ul>
    </article>
		<script>		
		var neotouch = {
			init : function() {
				this.getJson();
			},
			getJson : function() {
				var head = document.querySelector("head") || document.documentElement,
				script = document.createElement("script");

				/*
				* YQL Query. Permalink: http://y.ahoo.it/xUfgr
				* Source: http://g1.globo.com/dynamo/ciencia-e-saude/rss2.xml
				*/
				script.src = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20feed%20where%20url%3D'http%3A%2F%2Fg1.globo.com%2Fdynamo%2Fciencia-e-saude%2Frss2.xml'&format=json&callback=neotouch.updateTOC";

				script.onload = function() {
					(head && script.parentNode) && head.removeChild(script);
				};
				head.appendChild(script);
			},
			updateTOC : function(data) {
				var toc = document.getElementById("toc");
				var items = data.query.results.item;
				var html = "";
				for (var i = 0; i < items.length; i++) {
					html += "<li>" + items[i] + "</li>";
				}
				toc.innerHTML = html;
			}
		};
		neotouch.init();
		
		
		</script>
  </body>
</html>
